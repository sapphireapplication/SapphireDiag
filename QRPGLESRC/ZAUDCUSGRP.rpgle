000100100713     H*‚--------------------------------------------------------------------    000200100713     H*ˆCOPYRIGHT DATABOROUGH LTD 2010                                          000300100713     H*‚--------------------------------------------------------------------    000400100713     H debug(*yes) copyright('Databorough Ltd. 2010') datedit(*dmy)             000500100713     H option(*srcstmt:*nodebugio:*showcpy)                                     000600100713     F**********************************************************************    000700100713     F*‚F i l e s                                                               000800100713     F**********************************************************************    000900100714     Fcusgrp    if   e           k disk                                         001000100714     Fcustsl1   if   e           k disk                                         001100100714     Ftrnhstl1  if   e           k disk                                         001200100713     Fqsysprt   o    f  132        printer oflind(*INOF)                        001300100713                                                                                001400100713     D**********************************************************************    001500100713     D*‚D e f i n i t i o n s                                                   001600100713     D**********************************************************************    001700100713     D custscount      s              7p 0                                      001800100714     D trnhstcount     s              7p 0                                      001900100713     D tyme            s              6s 0                                      002000100713     D today           s              8s 0                                      002100100713                                                                                002200100714     D custsk        e ds                  extname(custsl1:*key)  prefix(a)     002300100714     D trnhstk       e ds                  extname(trnhstl1:*key)  prefix(b)    002400100713                                                                                002500100713     C**********************************************************************    002600100713     C*‚M a i n l i n e   C o d e                                               002700100713     C**********************************************************************    002800100713      /free                                                                     002900100713        *inof = *on;                                                            003000100714       //‚For each CUSGRP record                                                003100100714       setll *loval cusgrpr;                                                    003200100714       read(e) cusgrpr;                                                         003300100714       dow not %eof(cusgrp);                                                    003400100713                                                                                003500100713       custscount = *zeros;                                                     003600100714       trnhstcount = *zeros;                                                    003700100713                                                                                003800100713       //‚Count CUSTS records                                                   003900100714           axwbncd = xwbncd;                                                    004000100713           setll %kds(custsk:1) custsr;                                         004100100713           reade(e) %kds(custsk:1) custsr;                                      004200100714           dow not %eof(custsl1) and not %error;                                004300100713               custscount = custscount + 1;                                     004301110914           //  trnhstcount = *zeros;                                            004400100713               reade(e) %kds(custsk:1) custsr;                                  004500100713           enddo;                                                               004600100714                                                                                004700100714       //‚Count TRNHST records                                                  004800100714           bxwbncd = xwbncd;                                                    004900100714           setll %kds(trnhstk:1) trnhstr;                                       005000100714           reade(e) %kds(trnhstk:1) trnhstr;                                    005100100714           dow not %eof(trnhstl1) and not %error;                               005200100714               trnhstcount = trnhstcount + 1;                                   005201110914           //  custstcount = *zeros;                                            005300100714               reade(e) %kds(trnhstk:1) trnhstr;                                005400100714           enddo;                                                               005500100713                                                                                005600100714       //‚Output totals for customer group record                               005700100713          if *inof;                                                             005800100713             except headings;                                                   005900100713             *inof = *off;                                                      006000100713          endif;                                                                006100100713                                                                                006200100713          except totals;                                                        006300100713                                                                                006400100714       read(e) cusgrpr;                                                         006500100713       enddo;                                                                   006600100713                                                                                006700100713       //‚Terminate program and exit                                            006800100713       *inlr = *on;                                                             006900100713       return;                                                                  007000100713      /end-free                                                                 007100100713     C**********************************************************************    007200100713     C*‚* I N Z S R                                                             007300100713     C**********************************************************************    007400100713     C     *inzsr        begsr                                                  007500100713     C                   time                    tyme                           007600100713     C                   z-add     *date         today                          007700100713     C                   endsr                                                  007800100713     Oqsysprt   e            headings       1 01                                007900100713     O                                           10 'X-Analysis'                008000100714     O                                           60 'Audit log for file:'       008100100714     O                                           67 'CUSGRP'                    008200100713     O                                          132 'Databorough LTD.'          008300100713     O          e            headings       1                                   008400100913     O                                           10 'ZAUDCUSGRP'                008500100713     O                       tyme               120 '  :  :  '                  008600100713     O                       today              132 '  /  /    '                008700100713     O          e            headings       2                                   008800100713     O                                          127 'Page:'                     008900100713     O                       page          z    132                             009000100713     O          e            headings       1                                   009100100713     O                                           60 'CUSTS'                     009200100714     O                                           75 'TRNHST'                    009300100713     O          e            headings       2                                   009400100713     O                                           60 'Records'                   009500100713     O                                           75 'Records'                   009600100713     O          e            totals         2                                   009700100714     O                       xwbncd               4                             009800100714     O                       xwkhtx              45                             009900100713     O                       custscount    1     60                             010000100714     O                       trnhstcount   1     75                             